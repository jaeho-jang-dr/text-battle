
> kid-text-battle@0.0.9 dev
> next dev -p 3008

  â–² Next.js 14.2.0
  - Local:        http://localhost:3008
  - Environments: .env.local, .env

 âœ“ Starting...
 âœ“ Ready in 1452ms
 â—‹ Compiling / ...
 âœ“ Compiled / in 2.8s (1203 modules)
 HEAD / 200 in 2931ms
 âœ“ Compiled in 287ms (592 modules)
 âš  ./lib/db-sqlite.ts
export 'initializeDatabase' (reexported as 'initializeDatabase') was not found in './db-init' (possible exports: initializeAppDatabase)

Import trace for requested module:
./lib/db-sqlite.ts
./lib/db.ts
./app/api/auth/verify/route.ts
ğŸ—„ï¸  Using SQLite database
 GET /api/auth/verify 401 in 407ms
 â—‹ Compiling /api/auth/verify ...
 GET /api/auth/verify 401 in 8ms
 âœ“ Compiled /api/auth/verify in 76ms (669 modules)
 GET / 200 in 79ms
 âœ“ Compiled /api/animals in 65ms (671 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 87ms
 âœ“ Compiled /api/characters in 85ms (675 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/characters 401 in 103ms
 âœ“ Compiled /api/leaderboard in 86ms (677 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard 200 in 108ms
 GET / 200 in 92ms
 âœ“ Compiled /icon.svg in 291ms (696 modules)
 GET /icon.svg?936747c01d97c416 200 in 327ms
 GET /icon.svg?936747c01d97c416 200 in 10ms
 âœ“ Compiled /animals in 325ms (1225 modules)
 GET /animals 200 in 464ms
 GET /icon.svg?936747c01d97c416 200 in 34ms
 âœ“ Compiled /api/animals in 63ms (700 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 95ms
 GET /api/animals 200 in 7ms
 âœ“ Compiled /leaderboard in 233ms (1286 modules)
 GET /leaderboard 200 in 294ms
 GET /icon.svg?936747c01d97c416 200 in 13ms
 âœ“ Compiled /api/leaderboard in 62ms (706 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard?sortBy=elo 200 in 89ms
 GET /api/leaderboard?sortBy=elo 200 in 8ms
 GET / 200 in 39ms
 GET /icon.svg?936747c01d97c416 200 in 14ms
 âœ“ Compiled /admin in 197ms (1302 modules)
 âœ“ Compiled /api/admin/login in 74ms (716 modules)
ğŸ—„ï¸  Using SQLite database
Admin log error (non-critical): SqliteError: FOREIGN KEY constraint failed
    at Object.run (webpack-internal:///(rsc)/./lib/db-sqlite.ts:28:36)
    at POST (webpack-internal:///(rsc)/./app/api/admin/login/route.ts:67:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:53238
    at async e_.execute (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:44501)
    at async e_.handle (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:54492)
    at async doRender (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1372:42)
    at async cacheEntry.responseCache.get.routeKind (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1594:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1502:28)
    at async DevServer.renderPageComponent (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1919:24)
    at async DevServer.renderToResponseImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1957:32)
    at async DevServer.pipeImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:915:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:811:17)
    at async /home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/start-server.js:141:13) {
  code: 'SQLITE_CONSTRAINT_FOREIGNKEY'
}
 POST /api/admin/login 200 in 100ms
 âœ“ Compiled /api/admin/stats in 97ms (718 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/admin/stats 200 in 125ms
 âœ“ Compiled /api/auth/login in 113ms (722 modules)
ğŸ—„ï¸  Using SQLite database
 POST /api/auth/login 200 in 136ms
 â—‹ Compiling /play ...
 âœ“ Compiled /play in 1516ms (2430 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 24ms
 âœ“ Compiled /api/characters in 92ms (1285 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/characters?userId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 121ms
 GET /api/leaderboard? 200 in 9ms
 GET /api/leaderboard? 200 in 7ms
 GET /api/characters?excludeUserId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 9ms
 âœ“ Compiled /api/battles in 111ms (1288 modules)
ğŸ—„ï¸  Using SQLite database
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 135ms
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 8ms
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 42ms
 â¨¯ ./app/api/battles/history/route.ts
Error: 
  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:256:1]
 [2m256[0m | // ë°°í‹€ í†µê³„ ê³„ì‚°
 [2m257[0m | function calculateBattleStats(characterId: string): BattleStats {
 [2m258[0m |   // ê¸°ë³¸ í†µê³„
 [2m259[0m |   const basicStats = await db.prepare(`
     : [31;1m                           ^^[0m
 [2m260[0m |     SELECT 
 [2m261[0m |       COUNT(*) as total_battles,
 [2m262[0m |       SUM(CASE WHEN winner_id = ? THEN 1 ELSE 0 END) as wins,
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:266:1]
 [2m266[0m |   `).get(characterId, characterId, characterId, characterId) as any;
 [2m267[0m | 
 [2m268[0m |   // í‰ê·  ì ìˆ˜ ë³€í™”
 [2m269[0m |   const avgScoreChange = await db.prepare(`
     : [31;1m                               ^^[0m
 [2m270[0m |     SELECT AVG(
 [2m271[0m |       CASE 
 [2m272[0m |         WHEN attacker_id = ? THEN attacker_score_change
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:278:1]
 [2m278[0m |   `).get(characterId, characterId, characterId) as { avg_change: number };
 [2m279[0m | 
 [2m280[0m |   // í˜„ì¬ ì—°ìŠ¹/ì—°íŒ¨ ê³„ì‚°
 [2m281[0m |   const recentBattles = await db.prepare(`
     : [31;1m                              ^^[0m
 [2m282[0m |     SELECT winner_id
 [2m283[0m |     FROM battles
 [2m284[0m |     WHERE (attacker_id = ? OR defender_id = ?) AND winner_id IS NOT NULL
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:304:1]
 [2m304[0m |   }
 [2m305[0m | 
 [2m306[0m |   // ê°€ì¥ ë§ì´ ë§Œë‚œ ìƒëŒ€
 [2m307[0m |   const favoriteOpponent = await db.prepare(`
     : [31;1m                                 ^^[0m
 [2m308[0m |     SELECT 
 [2m309[0m |       CASE 
 [2m310[0m |         WHEN attacker_id = ? THEN defender_id
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:325:1]
 [2m325[0m |   `).get(characterId, characterId, characterId, characterId) as any;
 [2m326[0m | 
 [2m327[0m |   // ì²œì  (ê°€ì¥ ë§ì´ ì§„ ìƒëŒ€)
 [2m328[0m |   const nemesis = await db.prepare(`
     : [31;1m                        ^^[0m
 [2m329[0m |     SELECT 
 [2m330[0m |       CASE 
 [2m331[0m |         WHEN attacker_id = ? THEN defender_id
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:372:1]
 [2m372[0m | 
 [2m373[0m | // íƒ€ì„ë¼ì¸ ìƒì„±
 [2m374[0m | function generateTimeline(characterId: string): TimelinePoint[] {
 [2m375[0m |   const battles = await db.prepare(`
     : [31;1m                        ^^[0m
 [2m376[0m |     SELECT 
 [2m377[0m |       DATE(created_at) as battle_date,
 [2m378[0m |       COUNT(*) as battle_count,
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./app/api/battles/history/route.ts
 â¨¯ ./app/api/battles/history/route.ts
Error: 
  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:256:1]
 [2m256[0m | // ë°°í‹€ í†µê³„ ê³„ì‚°
 [2m257[0m | function calculateBattleStats(characterId: string): BattleStats {
 [2m258[0m |   // ê¸°ë³¸ í†µê³„
 [2m259[0m |   const basicStats = await db.prepare(`
     : [31;1m                           ^^[0m
 [2m260[0m |     SELECT 
 [2m261[0m |       COUNT(*) as total_battles,
 [2m262[0m |       SUM(CASE WHEN winner_id = ? THEN 1 ELSE 0 END) as wins,
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:266:1]
 [2m266[0m |   `).get(characterId, characterId, characterId, characterId) as any;
 [2m267[0m | 
 [2m268[0m |   // í‰ê·  ì ìˆ˜ ë³€í™”
 [2m269[0m |   const avgScoreChange = await db.prepare(`
     : [31;1m                               ^^[0m
 [2m270[0m |     SELECT AVG(
 [2m271[0m |       CASE 
 [2m272[0m |         WHEN attacker_id = ? THEN attacker_score_change
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:278:1]
 [2m278[0m |   `).get(characterId, characterId, characterId) as { avg_change: number };
 [2m279[0m | 
 [2m280[0m |   // í˜„ì¬ ì—°ìŠ¹/ì—°íŒ¨ ê³„ì‚°
 [2m281[0m |   const recentBattles = await db.prepare(`
     : [31;1m                              ^^[0m
 [2m282[0m |     SELECT winner_id
 [2m283[0m |     FROM battles
 [2m284[0m |     WHERE (attacker_id = ? OR defender_id = ?) AND winner_id IS NOT NULL
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:304:1]
 [2m304[0m |   }
 [2m305[0m | 
 [2m306[0m |   // ê°€ì¥ ë§ì´ ë§Œë‚œ ìƒëŒ€
 [2m307[0m |   const favoriteOpponent = await db.prepare(`
     : [31;1m                                 ^^[0m
 [2m308[0m |     SELECT 
 [2m309[0m |       CASE 
 [2m310[0m |         WHEN attacker_id = ? THEN defender_id
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:325:1]
 [2m325[0m |   `).get(characterId, characterId, characterId, characterId) as any;
 [2m326[0m | 
 [2m327[0m |   // ì²œì  (ê°€ì¥ ë§ì´ ì§„ ìƒëŒ€)
 [2m328[0m |   const nemesis = await db.prepare(`
     : [31;1m                        ^^[0m
 [2m329[0m |     SELECT 
 [2m330[0m |       CASE 
 [2m331[0m |         WHEN attacker_id = ? THEN defender_id
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:372:1]
 [2m372[0m | 
 [2m373[0m | // íƒ€ì„ë¼ì¸ ìƒì„±
 [2m374[0m | function generateTimeline(characterId: string): TimelinePoint[] {
 [2m375[0m |   const battles = await db.prepare(`
     : [31;1m                        ^^[0m
 [2m376[0m |     SELECT 
 [2m377[0m |       DATE(created_at) as battle_date,
 [2m378[0m |       COUNT(*) as battle_count,
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./app/api/battles/history/route.ts
 â—‹ Compiling /_not-found ...
 â¨¯ ./app/api/battles/history/route.ts
Error: 
  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:256:1]
 [2m256[0m | // ë°°í‹€ í†µê³„ ê³„ì‚°
 [2m257[0m | function calculateBattleStats(characterId: string): BattleStats {
 [2m258[0m |   // ê¸°ë³¸ í†µê³„
 [2m259[0m |   const basicStats = await db.prepare(`
     : [31;1m                           ^^[0m
 [2m260[0m |     SELECT 
 [2m261[0m |       COUNT(*) as total_battles,
 [2m262[0m |       SUM(CASE WHEN winner_id = ? THEN 1 ELSE 0 END) as wins,
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:266:1]
 [2m266[0m |   `).get(characterId, characterId, characterId, characterId) as any;
 [2m267[0m | 
 [2m268[0m |   // í‰ê·  ì ìˆ˜ ë³€í™”
 [2m269[0m |   const avgScoreChange = await db.prepare(`
     : [31;1m                               ^^[0m
 [2m270[0m |     SELECT AVG(
 [2m271[0m |       CASE 
 [2m272[0m |         WHEN attacker_id = ? THEN attacker_score_change
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:278:1]
 [2m278[0m |   `).get(characterId, characterId, characterId) as { avg_change: number };
 [2m279[0m | 
 [2m280[0m |   // í˜„ì¬ ì—°ìŠ¹/ì—°íŒ¨ ê³„ì‚°
 [2m281[0m |   const recentBattles = await db.prepare(`
     : [31;1m                              ^^[0m
 [2m282[0m |     SELECT winner_id
 [2m283[0m |     FROM battles
 [2m284[0m |     WHERE (attacker_id = ? OR defender_id = ?) AND winner_id IS NOT NULL
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:304:1]
 [2m304[0m |   }
 [2m305[0m | 
 [2m306[0m |   // ê°€ì¥ ë§ì´ ë§Œë‚œ ìƒëŒ€
 [2m307[0m |   const favoriteOpponent = await db.prepare(`
     : [31;1m                                 ^^[0m
 [2m308[0m |     SELECT 
 [2m309[0m |       CASE 
 [2m310[0m |         WHEN attacker_id = ? THEN defender_id
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:325:1]
 [2m325[0m |   `).get(characterId, characterId, characterId, characterId) as any;
 [2m326[0m | 
 [2m327[0m |   // ì²œì  (ê°€ì¥ ë§ì´ ì§„ ìƒëŒ€)
 [2m328[0m |   const nemesis = await db.prepare(`
     : [31;1m                        ^^[0m
 [2m329[0m |     SELECT 
 [2m330[0m |       CASE 
 [2m331[0m |         WHEN attacker_id = ? THEN defender_id
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:372:1]
 [2m372[0m | 
 [2m373[0m | // íƒ€ì„ë¼ì¸ ìƒì„±
 [2m374[0m | function generateTimeline(characterId: string): TimelinePoint[] {
 [2m375[0m |   const battles = await db.prepare(`
     : [31;1m                        ^^[0m
 [2m376[0m |     SELECT 
 [2m377[0m |       DATE(created_at) as battle_date,
 [2m378[0m |       COUNT(*) as battle_count,
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./app/api/battles/history/route.ts
 â¨¯ ./app/api/battles/history/route.ts
Error: 
  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:256:1]
 [2m256[0m | // ë°°í‹€ í†µê³„ ê³„ì‚°
 [2m257[0m | function calculateBattleStats(characterId: string): BattleStats {
 [2m258[0m |   // ê¸°ë³¸ í†µê³„
 [2m259[0m |   const basicStats = await db.prepare(`
     : [31;1m                           ^^[0m
 [2m260[0m |     SELECT 
 [2m261[0m |       COUNT(*) as total_battles,
 [2m262[0m |       SUM(CASE WHEN winner_id = ? THEN 1 ELSE 0 END) as wins,
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:266:1]
 [2m266[0m |   `).get(characterId, characterId, characterId, characterId) as any;
 [2m267[0m | 
 [2m268[0m |   // í‰ê·  ì ìˆ˜ ë³€í™”
 [2m269[0m |   const avgScoreChange = await db.prepare(`
     : [31;1m                               ^^[0m
 [2m270[0m |     SELECT AVG(
 [2m271[0m |       CASE 
 [2m272[0m |         WHEN attacker_id = ? THEN attacker_score_change
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:278:1]
 [2m278[0m |   `).get(characterId, characterId, characterId) as { avg_change: number };
 [2m279[0m | 
 [2m280[0m |   // í˜„ì¬ ì—°ìŠ¹/ì—°íŒ¨ ê³„ì‚°
 [2m281[0m |   const recentBattles = await db.prepare(`
     : [31;1m                              ^^[0m
 [2m282[0m |     SELECT winner_id
 [2m283[0m |     FROM battles
 [2m284[0m |     WHERE (attacker_id = ? OR defender_id = ?) AND winner_id IS NOT NULL
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:304:1]
 [2m304[0m |   }
 [2m305[0m | 
 [2m306[0m |   // ê°€ì¥ ë§ì´ ë§Œë‚œ ìƒëŒ€
 [2m307[0m |   const favoriteOpponent = await db.prepare(`
     : [31;1m                                 ^^[0m
 [2m308[0m |     SELECT 
 [2m309[0m |       CASE 
 [2m310[0m |         WHEN attacker_id = ? THEN defender_id
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:325:1]
 [2m325[0m |   `).get(characterId, characterId, characterId, characterId) as any;
 [2m326[0m | 
 [2m327[0m |   // ì²œì  (ê°€ì¥ ë§ì´ ì§„ ìƒëŒ€)
 [2m328[0m |   const nemesis = await db.prepare(`
     : [31;1m                        ^^[0m
 [2m329[0m |     SELECT 
 [2m330[0m |       CASE 
 [2m331[0m |         WHEN attacker_id = ? THEN defender_id
     `----

  [31mx[0m await isn't allowed in non-async function
     ,-[[36;1;4m/home/drjang00/DevEnvironments/kid-text-battle/app/api/battles/history/route.ts[0m:372:1]
 [2m372[0m | 
 [2m373[0m | // íƒ€ì„ë¼ì¸ ìƒì„±
 [2m374[0m | function generateTimeline(characterId: string): TimelinePoint[] {
 [2m375[0m |   const battles = await db.prepare(`
     : [31;1m                        ^^[0m
 [2m376[0m |     SELECT 
 [2m377[0m |       DATE(created_at) as battle_date,
 [2m378[0m |       COUNT(*) as battle_count,
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./app/api/battles/history/route.ts
 GET /api/battles/history?characterId=5e2d0ecd-8d17-4d82-a402-1005ffab9cd2&limit=20&offset=0&includeStats=true&includeTimeline=true 500 in 2094ms
 GET /api/battles/history?characterId=5e2d0ecd-8d17-4d82-a402-1005ffab9cd2&limit=20&offset=0&includeStats=true&includeTimeline=true 500 in 37ms
 GET /play 500 in 37ms
 GET /play 500 in 14ms
 GET /play 500 in 14ms
 GET / 500 in 11ms
 GET / 500 in 15ms
 âœ“ Compiled /_not-found in 647ms (2575 modules)
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 GET / 200 in 13ms
 GET /_next/static/webpack/d2efc503fe8db17a.webpack.hot-update.json 404 in 725ms
 GET / 200 in 20ms
 âœ“ Compiled /icon.svg in 318ms (1259 modules)
 GET /icon.svg?936747c01d97c416 200 in 356ms
 GET /icon.svg?936747c01d97c416 200 in 23ms
 âœ“ Compiled /api/auth/verify in 107ms (1314 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/auth/verify 200 in 149ms
 GET /api/auth/verify 200 in 12ms
 âœ“ Compiled /api/animals in 112ms (1318 modules)
 âœ“ Compiled (1320 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 248ms
 GET /api/characters?userId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 254ms
 âœ“ Compiled /api/leaderboard in 105ms (1322 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard? 200 in 129ms
 GET /api/leaderboard? 200 in 12ms
 âœ“ Compiled in 156ms (1346 modules)
 âœ“ Compiled in 143ms (1346 modules)
 âœ“ Compiled /api/battles/history in 281ms (1326 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/battles/history?characterId=test&limit=5&offset=0&includeStats=true&includeTimeline=true 401 in 312ms
 GET /api/battles/history?characterId=8d6949bb-f30d-47aa-84ed-9f8fbeb2bb04&limit=5&offset=0&includeStats=true&includeTimeline=true 200 in 10ms
 GET /api/battles/history?characterId=5e2d0ecd-8d17-4d82-a402-1005ffab9cd2&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 9ms
Cache hit for character 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2
 GET /api/battles/history?characterId=5e2d0ecd-8d17-4d82-a402-1005ffab9cd2&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 15ms
Force refresh requested for character 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2 - invalidating cache
 GET /api/battles/history?characterId=5e2d0ecd-8d17-4d82-a402-1005ffab9cd2&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1753828273234 200 in 17ms
 GET /api/characters?excludeUserId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 13ms
 âœ“ Compiled /api/battles in 234ms (1294 modules)
ğŸ—„ï¸  Using SQLite database
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 276ms
 âœ“ Compiled /api/characters/[characterId]/battle-text in 102ms (1296 modules)
ğŸ—„ï¸  Using SQLite database
ğŸ—„ï¸  Using SQLite database
 PATCH /api/characters/5e2d0ecd-8d17-4d82-a402-1005ffab9cd2/battle-text 200 in 319ms
 GET /api/characters?excludeUserId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 10ms
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 43ms
 GET /api/characters?excludeUserId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 8ms
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, 4211171f-fa64-41fb-a7fb-f23123bb5d23
 POST /api/battles 200 in 42ms
 PATCH /api/characters/5e2d0ecd-8d17-4d82-a402-1005ffab9cd2/battle-text 200 in 21ms
ğŸ—„ï¸  Using SQLite database
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 10ms
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, ad449073-828d-4b9c-9b5a-bdb2a9854cc0
 POST /api/battles 200 in 42ms
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, 934c6cb3-abd9-4437-a5ba-a81b9b75f345
 POST /api/battles 200 in 46ms
 POST /api/battles 404 in 11ms
 POST /api/battles 404 in 44ms
 POST /api/battles 404 in 42ms
 GET /api/battles/history?characterId=5e2d0ecd-8d17-4d82-a402-1005ffab9cd2&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 13ms
Cache hit for character 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2
 GET /api/battles/history?characterId=5e2d0ecd-8d17-4d82-a402-1005ffab9cd2&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 9ms
Force refresh requested for character 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2 - invalidating cache
 GET /api/battles/history?characterId=5e2d0ecd-8d17-4d82-a402-1005ffab9cd2&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1753828400498 200 in 9ms
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, 4211171f-fa64-41fb-a7fb-f23123bb5d23
 POST /api/battles 200 in 9ms
 âœ“ Compiled /api/animals in 250ms (1294 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 274ms
 âœ“ Compiled /api/auth/login in 179ms (1296 modules)
ğŸ—„ï¸  Using SQLite database
 POST /api/auth/login 200 in 205ms
 âœ“ Compiled /api/characters in 83ms (1298 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 184ms
 GET /api/characters?userId=65d839c1-25d8-4c97-9c7e-030caad34d0c 200 in 192ms
 POST /api/characters 200 in 11ms
 âœ“ Compiled /api/leaderboard in 149ms (1294 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard? 200 in 173ms
 GET /api/leaderboard? 200 in 8ms
 GET /api/characters?excludeUserId=65d839c1-25d8-4c97-9c7e-030caad34d0c 200 in 13ms
 âœ“ Compiled /api/battles in 78ms (1297 modules)
ğŸ—„ï¸  Using SQLite database
Battle completed - invalidating cache for characters: da2f07de-909b-42d2-a359-064a2edd8c0d, ad449073-828d-4b9c-9b5a-bdb2a9854cc0
 POST /api/battles 200 in 100ms
 GET /api/characters?excludeUserId=65d839c1-25d8-4c97-9c7e-030caad34d0c 200 in 12ms
Battle completed - invalidating cache for characters: da2f07de-909b-42d2-a359-064a2edd8c0d, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 44ms
 GET /api/characters?excludeUserId=65d839c1-25d8-4c97-9c7e-030caad34d0c 200 in 11ms
Battle completed - invalidating cache for characters: da2f07de-909b-42d2-a359-064a2edd8c0d, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 45ms
 GET /api/characters?excludeUserId=65d839c1-25d8-4c97-9c7e-030caad34d0c 200 in 9ms
Battle completed - invalidating cache for characters: da2f07de-909b-42d2-a359-064a2edd8c0d, 414bb705-a4da-48ee-bc50-0bc6bf63f93f
 POST /api/battles 200 in 43ms
Battle completed - invalidating cache for characters: da2f07de-909b-42d2-a359-064a2edd8c0d, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 43ms
Battle completed - invalidating cache for characters: da2f07de-909b-42d2-a359-064a2edd8c0d, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 44ms
 âœ“ Compiled /api/battles/history in 106ms (1296 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/battles/history?characterId=da2f07de-909b-42d2-a359-064a2edd8c0d&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 139ms
Cache hit for character da2f07de-909b-42d2-a359-064a2edd8c0d
 GET /api/battles/history?characterId=da2f07de-909b-42d2-a359-064a2edd8c0d&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 12ms
Force refresh requested for character da2f07de-909b-42d2-a359-064a2edd8c0d - invalidating cache
 GET /api/battles/history?characterId=da2f07de-909b-42d2-a359-064a2edd8c0d&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1753828540522 200 in 8ms
 âœ“ Compiled in 434ms (2572 modules)
 âœ“ Compiled in 144ms (1344 modules)
 âœ“ Compiled in 138ms (1344 modules)
 âœ“ Compiled in 151ms (1344 modules)
 âœ“ Compiled /api/auth/login in 167ms (1288 modules)
ğŸ—„ï¸  Using SQLite database
 POST /api/auth/login 200 in 216ms
 âœ“ Compiled /api/animals in 86ms (1290 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 109ms
 âœ“ Compiled /api/characters in 221ms (1292 modules)
ğŸ—„ï¸  Using SQLite database
 POST /api/characters 200 in 248ms
 GET /api/characters 200 in 23ms
 âœ“ Compiled /api/characters/[characterId]/battle-text in 205ms (1294 modules)
ğŸ—„ï¸  Using SQLite database
 PATCH /api/characters/2c2976e0-ffbd-456f-893a-cffa6b607006/battle-text 200 in 251ms
 GET /api/characters 200 in 10ms
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 24ms
 POST /api/auth/login 200 in 43ms
 GET /api/characters?userId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 20ms
 GET /api/animals 200 in 22ms
 POST /api/characters 200 in 12ms
 âœ“ Compiled /api/leaderboard in 168ms (1294 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard? 200 in 196ms
 GET /api/leaderboard? 200 in 9ms
 âœ“ Compiled /api/characters/[characterId]/battle-text in 72ms (1296 modules)
ğŸ—„ï¸  Using SQLite database
 PATCH /api/characters/43aff1e9-cddf-4cbe-a221-8152800e26a5/battle-text 200 in 109ms
ğŸ—„ï¸  Using SQLite database
 PATCH /api/characters/43aff1e9-cddf-4cbe-a221-8152800e26a5/battle-text 200 in 20ms
ğŸ—„ï¸  Using SQLite database
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 12ms
 âœ“ Compiled /api/battles in 202ms (1295 modules)
ğŸ—„ï¸  Using SQLite database
Battle completed - invalidating cache for characters: 43aff1e9-cddf-4cbe-a221-8152800e26a5, ad449073-828d-4b9c-9b5a-bdb2a9854cc0
 POST /api/battles 200 in 227ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 9ms
Battle completed - invalidating cache for characters: 43aff1e9-cddf-4cbe-a221-8152800e26a5, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 44ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 9ms
Battle completed - invalidating cache for characters: 43aff1e9-cddf-4cbe-a221-8152800e26a5, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 45ms
Battle completed - invalidating cache for characters: 43aff1e9-cddf-4cbe-a221-8152800e26a5, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 41ms
Battle completed - invalidating cache for characters: 43aff1e9-cddf-4cbe-a221-8152800e26a5, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 46ms
 âœ“ Compiled /api/battles/history in 128ms (1298 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/battles/history?characterId=43aff1e9-cddf-4cbe-a221-8152800e26a5&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 154ms
Cache hit for character 43aff1e9-cddf-4cbe-a221-8152800e26a5
 GET /api/battles/history?characterId=43aff1e9-cddf-4cbe-a221-8152800e26a5&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 11ms
Force refresh requested for character 43aff1e9-cddf-4cbe-a221-8152800e26a5 - invalidating cache
 GET /api/battles/history?characterId=43aff1e9-cddf-4cbe-a221-8152800e26a5&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1753829376908 200 in 9ms
Cache hit for character 43aff1e9-cddf-4cbe-a221-8152800e26a5
 GET /api/battles/history?characterId=43aff1e9-cddf-4cbe-a221-8152800e26a5&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 13ms
Cache hit for character 43aff1e9-cddf-4cbe-a221-8152800e26a5
 GET /api/battles/history?characterId=43aff1e9-cddf-4cbe-a221-8152800e26a5&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 11ms
Cache hit for character 43aff1e9-cddf-4cbe-a221-8152800e26a5
 GET /api/battles/history?characterId=43aff1e9-cddf-4cbe-a221-8152800e26a5&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 14ms
Cache hit for character 43aff1e9-cddf-4cbe-a221-8152800e26a5
 GET /api/battles/history?characterId=43aff1e9-cddf-4cbe-a221-8152800e26a5&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 10ms
 âœ“ Compiled in 969ms (2572 modules)
 âœ“ Compiled /api/animals in 235ms (1288 modules)
 âœ“ Compiled (1290 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 441ms
 GET /api/characters?userId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 446ms
 âœ“ Compiled /api/leaderboard in 111ms (1292 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard? 200 in 144ms
 GET /api/leaderboard? 200 in 11ms
 âœ“ Compiled in 287ms (2636 modules)
 âœ“ Compiled in 337ms (2636 modules)
 âœ“ Compiled in 372ms (2636 modules)
 âœ“ Compiled in 266ms (2572 modules)
 GET /play 200 in 96ms
 âœ“ Compiled /icon.svg in 423ms (1258 modules)
 GET /icon.svg?936747c01d97c416 200 in 484ms
 GET /icon.svg?936747c01d97c416 200 in 33ms
 âœ“ Compiled /api/animals in 122ms (1313 modules)
 âœ“ Compiled (1315 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 289ms
 GET /api/auth/verify 200 in 301ms
 GET /api/auth/verify 200 in 28ms
 âœ“ Compiled /api/characters in 197ms (1319 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 358ms
 GET /api/characters?userId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 373ms
 GET /api/animals 200 in 23ms
 GET /api/characters?userId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 29ms
 âœ“ Compiled /api/leaderboard in 146ms (1321 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard? 200 in 183ms
 GET /api/leaderboard? 200 in 10ms
 âœ“ Compiled /api/characters/[characterId]/battle-text in 93ms (1323 modules)
ğŸ—„ï¸  Using SQLite database
 PATCH /api/characters/43aff1e9-cddf-4cbe-a221-8152800e26a5/battle-text 200 in 134ms
ğŸ—„ï¸  Using SQLite database
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 13ms
 âœ“ Compiled /api/battles in 203ms (1326 modules)
ğŸ—„ï¸  Using SQLite database
Battle completed - invalidating cache for characters: 43aff1e9-cddf-4cbe-a221-8152800e26a5, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 232ms
 âœ“ Compiled /api/battles/history in 147ms (1329 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/battles/history?characterId=43aff1e9-cddf-4cbe-a221-8152800e26a5&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 181ms
Cache hit for character 43aff1e9-cddf-4cbe-a221-8152800e26a5
 GET /api/battles/history?characterId=43aff1e9-cddf-4cbe-a221-8152800e26a5&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 16ms
Force refresh requested for character 43aff1e9-cddf-4cbe-a221-8152800e26a5 - invalidating cache
 GET /api/battles/history?characterId=43aff1e9-cddf-4cbe-a221-8152800e26a5&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1753851860291 200 in 9ms
 POST /api/characters 200 in 19ms
 GET /api/leaderboard? 200 in 17ms
 GET /api/leaderboard? 200 in 15ms
 PATCH /api/characters/4826a50d-b7bf-483e-aa05-c459e592caa4/battle-text 200 in 27ms
ğŸ—„ï¸  Using SQLite database
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 11ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 46ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 11ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, 414bb705-a4da-48ee-bc50-0bc6bf63f93f
 POST /api/battles 200 in 40ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 43ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 43ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 15ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, 8b19af22-a382-461a-be4e-b8629facef57
 POST /api/battles 200 in 45ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 10ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, 4211171f-fa64-41fb-a7fb-f23123bb5d23
 POST /api/battles 200 in 42ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 10ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, 0f51e406-5eb6-470e-abed-ef6a226101c2
 POST /api/battles 200 in 42ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 10ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, da9cd092-f2f4-4c0b-addd-b5e5b2968422
 POST /api/battles 200 in 45ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 12ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 43ms
 GET /api/battles/history?characterId=4826a50d-b7bf-483e-aa05-c459e592caa4&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 16ms
Cache hit for character 4826a50d-b7bf-483e-aa05-c459e592caa4
 GET /api/battles/history?characterId=4826a50d-b7bf-483e-aa05-c459e592caa4&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 10ms
Force refresh requested for character 4826a50d-b7bf-483e-aa05-c459e592caa4 - invalidating cache
 GET /api/battles/history?characterId=4826a50d-b7bf-483e-aa05-c459e592caa4&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1753851988986 200 in 11ms
Cache hit for character 4826a50d-b7bf-483e-aa05-c459e592caa4
 GET /api/battles/history?characterId=4826a50d-b7bf-483e-aa05-c459e592caa4&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 11ms
Cache hit for character 4826a50d-b7bf-483e-aa05-c459e592caa4
 GET /api/battles/history?characterId=4826a50d-b7bf-483e-aa05-c459e592caa4&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 11ms
Force refresh requested for character 4826a50d-b7bf-483e-aa05-c459e592caa4 - invalidating cache
 GET /api/battles/history?characterId=4826a50d-b7bf-483e-aa05-c459e592caa4&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1753851999780 200 in 23ms
Force refresh requested for character 4826a50d-b7bf-483e-aa05-c459e592caa4 - invalidating cache
 GET /api/battles/history?characterId=4826a50d-b7bf-483e-aa05-c459e592caa4&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1753852001216 200 in 15ms
 PATCH /api/characters/4826a50d-b7bf-483e-aa05-c459e592caa4/battle-text 200 in 32ms
ğŸ—„ï¸  Using SQLite database
Cache hit for character 4826a50d-b7bf-483e-aa05-c459e592caa4
 GET /api/battles/history?characterId=4826a50d-b7bf-483e-aa05-c459e592caa4&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 12ms
Cache hit for character 4826a50d-b7bf-483e-aa05-c459e592caa4
 GET /api/battles/history?characterId=4826a50d-b7bf-483e-aa05-c459e592caa4&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 11ms
Force refresh requested for character 4826a50d-b7bf-483e-aa05-c459e592caa4 - invalidating cache
 GET /api/battles/history?characterId=4826a50d-b7bf-483e-aa05-c459e592caa4&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1753852012216 200 in 17ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 13ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, 4211171f-fa64-41fb-a7fb-f23123bb5d23
 POST /api/battles 200 in 15ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 13ms
Battle completed - invalidating cache for characters: 43aff1e9-cddf-4cbe-a221-8152800e26a5, 414bb705-a4da-48ee-bc50-0bc6bf63f93f
 POST /api/battles 200 in 45ms
 POST /api/characters 200 in 11ms
 GET /api/leaderboard? 200 in 12ms
 GET /api/leaderboard? 200 in 10ms
 PATCH /api/characters/eacec617-5d25-42be-b0e4-5e2be4766f8d/battle-text 200 in 41ms
ğŸ—„ï¸  Using SQLite database
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 9ms
Battle completed - invalidating cache for characters: eacec617-5d25-42be-b0e4-5e2be4766f8d, 2f0131bd-606c-40df-8c9f-ad39c1bcceb8
 POST /api/battles 200 in 45ms
 GET /api/characters?userId=77d005ae-565b-4823-832e-4f5cac4a2620&_t=1753852133144 200 in 11ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 12ms
Battle completed - invalidating cache for characters: 4826a50d-b7bf-483e-aa05-c459e592caa4, 2f0131bd-606c-40df-8c9f-ad39c1bcceb8
 POST /api/battles 200 in 42ms
 GET /api/characters?excludeUserId=77d005ae-565b-4823-832e-4f5cac4a2620 200 in 12ms
Battle completed - invalidating cache for characters: eacec617-5d25-42be-b0e4-5e2be4766f8d, 4211171f-fa64-41fb-a7fb-f23123bb5d23
 POST /api/battles 200 in 44ms
Battle completed - invalidating cache for characters: eacec617-5d25-42be-b0e4-5e2be4766f8d, da9cd092-f2f4-4c0b-addd-b5e5b2968422
 POST /api/battles 200 in 12ms
Battle completed - invalidating cache for characters: eacec617-5d25-42be-b0e4-5e2be4766f8d, da9cd092-f2f4-4c0b-addd-b5e5b2968422
 POST /api/battles 200 in 14ms
 GET /api/animals 200 in 24ms
 âœ“ Compiled /api/admin/login in 183ms (1295 modules)
ğŸ—„ï¸  Using SQLite database
Admin log error (non-critical): SqliteError: FOREIGN KEY constraint failed
    at Object.run (webpack-internal:///(rsc)/./lib/db-sqlite.ts:28:36)
    at POST (webpack-internal:///(rsc)/./app/api/admin/login/route.ts:67:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:53238
    at async e_.execute (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:44501)
    at async e_.handle (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:54492)
    at async doRender (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1372:42)
    at async cacheEntry.responseCache.get.routeKind (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1594:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1502:28)
    at async DevServer.renderPageComponent (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1919:24)
    at async DevServer.renderToResponseImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1957:32)
    at async DevServer.pipeImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:915:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:811:17)
    at async /home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/start-server.js:141:13) {
  code: 'SQLITE_CONSTRAINT_FOREIGNKEY'
}
 POST /api/admin/login 200 in 230ms
 âœ“ Compiled /api/admin/stats in 110ms (1297 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/admin/stats 200 in 147ms
 âœ“ Compiled /api/admin/settings in 110ms (1299 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/admin/settings 200 in 131ms
 GET /api/admin/settings 200 in 10ms
Setting update error: SqliteError: FOREIGN KEY constraint failed
    at Object.run (webpack-internal:///(rsc)/./lib/db-sqlite.ts:28:36)
    at PUT (webpack-internal:///(rsc)/./app/api/admin/settings/route.ts:82:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:53238
    at async e_.execute (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:44501)
    at async e_.handle (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:54492)
    at async doRender (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1372:42)
    at async cacheEntry.responseCache.get.routeKind (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1594:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1502:28)
    at async DevServer.renderPageComponent (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1919:24)
    at async DevServer.renderToResponseImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1957:32)
    at async DevServer.pipeImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:915:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:811:17)
    at async /home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/start-server.js:141:13) {
  code: 'SQLITE_CONSTRAINT_FOREIGNKEY'
}
 PUT /api/admin/settings 500 in 10ms
Setting update error: SqliteError: FOREIGN KEY constraint failed
    at Object.run (webpack-internal:///(rsc)/./lib/db-sqlite.ts:28:36)
    at PUT (webpack-internal:///(rsc)/./app/api/admin/settings/route.ts:82:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:53238
    at async e_.execute (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:44501)
    at async e_.handle (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:54492)
    at async doRender (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1372:42)
    at async cacheEntry.responseCache.get.routeKind (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1594:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1502:28)
    at async DevServer.renderPageComponent (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1919:24)
    at async DevServer.renderToResponseImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1957:32)
    at async DevServer.pipeImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:915:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:811:17)
    at async /home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/start-server.js:141:13) {
  code: 'SQLITE_CONSTRAINT_FOREIGNKEY'
}
 PUT /api/admin/settings 500 in 44ms
Setting update error: SqliteError: FOREIGN KEY constraint failed
    at Object.run (webpack-internal:///(rsc)/./lib/db-sqlite.ts:28:36)
    at PUT (webpack-internal:///(rsc)/./app/api/admin/settings/route.ts:82:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:53238
    at async e_.execute (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:44501)
    at async e_.handle (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:54492)
    at async doRender (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1372:42)
    at async cacheEntry.responseCache.get.routeKind (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1594:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1502:28)
    at async DevServer.renderPageComponent (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1919:24)
    at async DevServer.renderToResponseImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:1957:32)
    at async DevServer.pipeImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:915:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/base-server.js:811:17)
    at async /home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async requestHandlerImpl (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/router-server.js:377:13)
    at async Server.requestListener (/home/drjang00/DevEnvironments/kid-text-battle/node_modules/next/dist/server/lib/start-server.js:141:13) {
  code: 'SQLITE_CONSTRAINT_FOREIGNKEY'
}
 PUT /api/admin/settings 500 in 13ms
 GET / 200 in 148ms
 âœ“ Compiled /icon.svg in 351ms (1258 modules)
 GET /icon.svg?936747c01d97c416 200 in 444ms
 âœ“ Compiled /api/auth/login in 216ms (1315 modules)
ğŸ—„ï¸  Using SQLite database
 POST /api/auth/login 200 in 289ms
 âœ“ Compiled /api/animals in 97ms (1317 modules)
 âœ“ Compiled (1319 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 202ms
 GET /api/characters?userId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 212ms
 âœ“ Compiled /api/leaderboard in 136ms (1321 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard? 200 in 163ms
 GET /api/leaderboard? 200 in 12ms
 âœ“ Compiled /api/battles/history in 151ms (1325 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/battles/history?characterId=c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 192ms
Cache hit for character c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e
 GET /api/battles/history?characterId=c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 10ms
Force refresh requested for character c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e - invalidating cache
 GET /api/battles/history?characterId=c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1754115017200 200 in 13ms
 GET /api/characters?excludeUserId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 8ms
 âœ“ Compiled /api/battles in 120ms (1300 modules)
ğŸ—„ï¸  Using SQLite database
Battle completed - invalidating cache for characters: c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e, ad449073-828d-4b9c-9b5a-bdb2a9854cc0
 POST /api/battles 200 in 162ms
 GET /api/characters?excludeUserId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 11ms
Battle completed - invalidating cache for characters: c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 48ms
 GET /api/characters?excludeUserId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 12ms
Battle completed - invalidating cache for characters: c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e, 4211171f-fa64-41fb-a7fb-f23123bb5d23
 POST /api/battles 200 in 41ms
Battle completed - invalidating cache for characters: c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 10ms
 GET /leaderboard 200 in 71ms
 âœ“ Compiled /icon.svg in 137ms (1327 modules)
 GET /icon.svg?936747c01d97c416 200 in 189ms
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard?sortBy=elo 200 in 32ms
 âœ“ Compiled /api/auth/verify in 158ms (1329 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/auth/verify 200 in 295ms
 GET /api/leaderboard?sortBy=elo 200 in 268ms
 GET /api/auth/verify 200 in 10ms
 GET /api/auth/verify 200 in 12ms
 GET /api/auth/verify 200 in 10ms
Battle completed - invalidating cache for characters: c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e, 3d5ffec3-c5f4-488d-a097-21b3acd65fb2
 POST /api/battles 200 in 18ms
 GET /api/leaderboard?sortBy=elo 200 in 11ms
Battle completed - invalidating cache for characters: c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e, ad449073-828d-4b9c-9b5a-bdb2a9854cc0
 POST /api/battles 200 in 43ms
 GET /api/leaderboard?sortBy=elo 200 in 11ms
Battle completed - invalidating cache for characters: c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 44ms
 GET /api/leaderboard?sortBy=elo 200 in 14ms
 GET / 200 in 89ms
 GET /icon.svg?936747c01d97c416 200 in 25ms
 GET /api/auth/verify 200 in 16ms
 GET /api/auth/verify 200 in 19ms
 GET /api/characters?userId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 24ms
 GET /api/animals 200 in 28ms
 GET /api/leaderboard? 200 in 11ms
 GET /api/leaderboard? 200 in 10ms
 âœ“ Compiled /api/characters/[characterId]/battle-text in 173ms (1326 modules)
ğŸ—„ï¸  Using SQLite database
 PATCH /api/characters/c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e/battle-text 200 in 225ms
ğŸ—„ï¸  Using SQLite database
 âœ“ Compiled /api/battles/history in 127ms (1329 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/battles/history?characterId=8c30f294-8069-493a-a0fc-ff09c5a37c3c&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 170ms
Cache hit for character 8c30f294-8069-493a-a0fc-ff09c5a37c3c
 GET /api/battles/history?characterId=8c30f294-8069-493a-a0fc-ff09c5a37c3c&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 10ms
Force refresh requested for character 8c30f294-8069-493a-a0fc-ff09c5a37c3c - invalidating cache
 GET /api/battles/history?characterId=8c30f294-8069-493a-a0fc-ff09c5a37c3c&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1754115103253 200 in 13ms
 GET /api/animals 200 in 13ms
 âœ“ Compiled /api/auth/login in 103ms (1331 modules)
ğŸ—„ï¸  Using SQLite database
 POST /api/auth/login 200 in 130ms
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 24ms
 GET /api/animals 200 in 21ms
 POST /api/characters 200 in 21ms
 GET /api/leaderboard? 200 in 19ms
 GET /api/leaderboard? 200 in 15ms
 GET /api/characters?excludeUserId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 12ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, da9cd092-f2f4-4c0b-addd-b5e5b2968422
 POST /api/battles 200 in 47ms
 GET /api/characters?excludeUserId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 12ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, 2f0131bd-606c-40df-8c9f-ad39c1bcceb8
 POST /api/battles 200 in 44ms
 GET /api/characters?excludeUserId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 12ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 43ms
 GET /api/characters?excludeUserId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 10ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, 0f51e406-5eb6-470e-abed-ef6a226101c2
 POST /api/battles 200 in 42ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, da9cd092-f2f4-4c0b-addd-b5e5b2968422
 POST /api/battles 200 in 44ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, ad449073-828d-4b9c-9b5a-bdb2a9854cc0
 POST /api/battles 200 in 44ms
 GET /api/battles/history?characterId=a1d3726c-838c-4f31-9683-9d40d7e9aef8&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 14ms
Cache hit for character a1d3726c-838c-4f31-9683-9d40d7e9aef8
 GET /api/battles/history?characterId=a1d3726c-838c-4f31-9683-9d40d7e9aef8&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 10ms
Force refresh requested for character a1d3726c-838c-4f31-9683-9d40d7e9aef8 - invalidating cache
 GET /api/battles/history?characterId=a1d3726c-838c-4f31-9683-9d40d7e9aef8&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1754115218606 200 in 11ms
Force refresh requested for character a1d3726c-838c-4f31-9683-9d40d7e9aef8 - invalidating cache
 GET /api/battles/history?characterId=a1d3726c-838c-4f31-9683-9d40d7e9aef8&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1754115219856 200 in 13ms
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd&_t=1754115226394 200 in 17ms
 âœ“ Compiled in 253ms (1228 modules)
 âœ“ Compiled in 832ms (2572 modules)
 âœ“ Compiled in 194ms (1344 modules)
 âœ“ Compiled in 222ms (1344 modules)
 âœ“ Compiled in 134ms (1344 modules)
 âœ“ Compiled in 168ms (1344 modules)
 âœ“ Compiled in 169ms (1344 modules)
 âœ“ Compiled in 153ms (1344 modules)
 âœ“ Compiled in 769ms (2574 modules)
 âœ“ Compiled /api/animals in 296ms (1289 modules)
 âœ“ Compiled in 1ms (1291 modules)
 âœ“ Compiled in 0ms (1291 modules)
 âœ“ Compiled in 0ms (1291 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 728ms
 âœ“ Compiled /api/leaderboard in 0ms (1291 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 853ms
 âœ“ Compiled in 0ms (1293 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard? 200 in 431ms
 GET /api/leaderboard? 200 in 22ms
 âœ“ Compiled in 498ms (2638 modules)
 âœ“ Compiled in 849ms (2576 modules)
 âœ“ Compiled /api/animals in 197ms (1290 modules)
 âœ“ Compiled (1292 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 352ms
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 358ms
 âœ“ Compiled /api/leaderboard in 92ms (1294 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard? 200 in 126ms
 GET /api/leaderboard? 200 in 13ms
 âœ“ Compiled in 340ms (2640 modules)
 âœ“ Compiled in 446ms (2640 modules)
 âœ“ Compiled in 478ms (2576 modules)
 GET /play 200 in 98ms
 âœ“ Compiled /icon.svg in 383ms (1260 modules)
 GET /icon.svg?936747c01d97c416 200 in 435ms
 âœ“ Compiled /api/animals in 106ms (1315 modules)
 âœ“ Compiled in 0ms (1317 modules)
 âœ“ Compiled in 0ms (1317 modules)
 âœ“ Compiled in 0ms (1317 modules)
ğŸ—„ï¸  Using SQLite database
 GET /icon.svg?936747c01d97c416 200 in 430ms
 GET /api/auth/verify 200 in 448ms
 âœ“ Compiled /api/characters in 0ms (1317 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 557ms
 âœ“ Compiled in 1ms (1321 modules)
 âœ“ Compiled in 0ms (1321 modules)
 âœ“ Compiled in 0ms (1321 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/auth/verify 200 in 515ms
ğŸ—„ï¸  Using SQLite database
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 616ms
 GET /api/animals 200 in 485ms
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 33ms
 âœ“ Compiled /api/leaderboard in 133ms (1323 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 325ms
 GET /api/leaderboard? 200 in 334ms
 GET /api/leaderboard? 200 in 14ms
 GET /api/characters?excludeUserId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 14ms
 âœ“ Compiled /api/battles in 246ms (1326 modules)
ğŸ—„ï¸  Using SQLite database
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, b6f809a9-cb4f-417a-bfd8-3e1250da982e
 POST /api/battles 200 in 282ms
 GET /api/characters?excludeUserId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 12ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 44ms
 GET /api/characters?excludeUserId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 24ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, 4211171f-fa64-41fb-a7fb-f23123bb5d23
 POST /api/battles 200 in 48ms
 GET /play 200 in 79ms
 GET /icon.svg?936747c01d97c416 200 in 22ms
 GET /api/auth/verify 200 in 21ms
 GET /api/auth/verify 200 in 56ms
 GET /api/animals 200 in 66ms
 GET /icon.svg?936747c01d97c416 200 in 66ms
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 67ms
 GET /api/animals 200 in 36ms
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 36ms
 GET /api/leaderboard? 200 in 40ms
 GET /api/animals 200 in 36ms
 GET /api/leaderboard? 200 in 25ms
 GET /api/characters?excludeUserId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 11ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, 8b19af22-a382-461a-be4e-b8629facef57
 POST /api/battles 200 in 43ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, 414bb705-a4da-48ee-bc50-0bc6bf63f93f
 POST /api/battles 200 in 43ms
 âœ“ Compiled /api/battles/history in 173ms (1329 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/battles/history?characterId=a1d3726c-838c-4f31-9683-9d40d7e9aef8&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 210ms
Cache hit for character a1d3726c-838c-4f31-9683-9d40d7e9aef8
 GET /api/battles/history?characterId=a1d3726c-838c-4f31-9683-9d40d7e9aef8&limit=20&offset=0&includeStats=true&includeTimeline=true 200 in 23ms
Force refresh requested for character a1d3726c-838c-4f31-9683-9d40d7e9aef8 - invalidating cache
 GET /api/battles/history?characterId=a1d3726c-838c-4f31-9683-9d40d7e9aef8&limit=20&offset=0&includeStats=true&includeTimeline=true&_t=1754116528372 200 in 12ms
 âœ“ Compiled /api/characters/[characterId]/battle-text in 157ms (1331 modules)
ğŸ—„ï¸  Using SQLite database
 PATCH /api/characters/a1d3726c-838c-4f31-9683-9d40d7e9aef8/battle-text 200 in 203ms
ğŸ—„ï¸  Using SQLite database
 âœ“ Compiled in 721ms (2576 modules)
 âœ“ Compiled in 405ms (2576 modules)
 GET /play 200 in 81ms
 âœ“ Compiled /icon.svg in 225ms (1260 modules)
 GET /icon.svg?936747c01d97c416 200 in 276ms
 GET /icon.svg?936747c01d97c416 200 in 13ms
 âœ“ Compiled /api/animals in 110ms (1315 modules)
 âœ“ Compiled (1317 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 428ms
 GET /api/auth/verify 200 in 448ms
 âœ“ Compiled /api/characters in 176ms (1321 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/animals 200 in 305ms
 GET /api/auth/verify 200 in 307ms
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 318ms
 GET /api/animals 200 in 26ms
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 35ms
 âœ“ Compiled /api/leaderboard in 103ms (1323 modules)
ğŸ—„ï¸  Using SQLite database
 GET /api/leaderboard? 200 in 137ms
 GET /api/leaderboard? 200 in 14ms
 GET /api/characters?excludeUserId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 11ms
 âœ“ Compiled /api/battles in 251ms (1326 modules)
ğŸ—„ï¸  Using SQLite database
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, 414bb705-a4da-48ee-bc50-0bc6bf63f93f
 POST /api/battles 200 in 278ms
 GET /play 200 in 69ms
 GET /icon.svg?936747c01d97c416 200 in 26ms
 GET /api/auth/verify 200 in 22ms
 GET /api/animals 200 in 32ms
 GET /api/auth/verify 200 in 39ms
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 36ms
 GET /api/animals 200 in 31ms
 GET /api/characters?userId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 30ms
 GET /api/leaderboard? 200 in 33ms
 GET /api/animals 200 in 32ms
 GET /api/leaderboard? 200 in 16ms
 GET /api/characters?excludeUserId=5ca9a886-7e90-4c9d-b1ba-7ad5d8fae9cd 200 in 12ms
Battle completed - invalidating cache for characters: a1d3726c-838c-4f31-9683-9d40d7e9aef8, 8b19af22-a382-461a-be4e-b8629facef57
 POST /api/battles 200 in 42ms
 GET /api/animals 200 in 25ms
 âœ“ Compiled /api/auth/login in 112ms (1328 modules)
ğŸ—„ï¸  Using SQLite database
 POST /api/auth/login 200 in 145ms
 GET /api/characters?userId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 23ms
 GET /api/animals 200 in 26ms
 GET /api/leaderboard? 200 in 12ms
 GET /api/leaderboard? 200 in 13ms
 GET /api/characters?excludeUserId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 9ms
Battle completed - invalidating cache for characters: 5e2d0ecd-8d17-4d82-a402-1005ffab9cd2, 414bb705-a4da-48ee-bc50-0bc6bf63f93f
 POST /api/battles 200 in 45ms
Battle completed - invalidating cache for characters: c3d3846d-d44e-43d7-be1c-cd6b2bb8c69e, ad449073-828d-4b9c-9b5a-bdb2a9854cc0
 POST /api/battles 200 in 17ms
 GET /api/characters?excludeUserId=c91744eb-01d1-4cc6-ba45-9c6b0cc260b7 200 in 17ms
Battle completed - invalidating cache for characters: 8c30f294-8069-493a-a0fc-ff09c5a37c3c, 99538f92-61f4-4099-997a-066b818649d7
 POST /api/battles 200 in 44ms
[?25h
